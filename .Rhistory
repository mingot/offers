getwd()
train = open("trainHistory")
train = open("./trainHistory")
help(open)
help(readcsv)
help(readcsv)
help(readtable)
help(readTable)
help(read_table)
help(read.table)
train = read.table(file="trainHistory", header=T, sep=",")
head(train)
nrow(train)
sum(unique(train$id))
nrow(unique(train$id))
size(unique(train$id))
length(unique(train$id))
length(unique(train$chain))
length(unique(train$offer))
length(unique(train$market))
hist(train$repeattrips)
hist(train$repeattrips[train$repeattrips!=0])
head(train)
sum(train$repeattrips>0)
sum(train$repeattrips>0)/nrow(train)
test = read.table(file="testHistory", header=T, sep=",")
nrow(test)
head(test)
sum(test$id in train$id)
sum(test$id %in% train$id)
length(unique(test$chain))
length(unique(test$offers))
length(unique(test$offer))
length(unique(test$market))
!(train$chain %in% test$chain)
test$chain[!(test$chain %in% train$chain)]
unique(test$chain[!(test$chain %in% train$chain)])
unique(test$offer[!(test$offer %in% train$offer)])
unique(test$markets[!(test$markets %in% train$markets)])
train$markets
train$market
unique(test$market[!(test$market %in% train$market)])
head(train)
offers = read.table(file="offers", header=T, sep=",")
head(offers)
length(unique(offers$offer))
trainIdOffer = paste(train$id, train$offer, sep="")
head(trainIdOffer)
trainIdOffer = paste(train$id, train$offer, sep="-")
trainIdOffer = paste(train$id, train$offer, sep="-")
head(trainIdOffer)
testIdOffer = paste(test$id, test$offer, sep="-")
testIdOffer %in% trainIdOffer
sum(testIdOffer %in% trainIdOffer)
train = read.table(file="trainHistory", header=T, sep=",")
test = read.table(file="testHistory", header=T, sep=",")
offers = read.table(file="offers", header=T, sep=",")
train = read.table(file="trainHistory", header=T, sep=",")
test = read.table(file="testHistory", header=T, sep=",")
offers = read.table(file="offers", header=T, sep=",")
head(train)
train$repeater = 0
train$repeater[train$repeattrips>0] = 1
head(train)
help(aggregate)
aggregate(train, by=list(offer), FUN=sum)
aggregate(train, by=list(train$offer), FUN=sum)
t = aggregate(train, by=list(train$offer), FUN=sum)
t = aggregate(train, by=list(factor(train$offer)), FUN=sum)
t = aggregate(train, by=train$offer, FUN=sum)
head(train)
factor(train$offer)
t = aggregate(train, by=(factor(train$offer)), FUN=sum)
t = aggregate(train, by=list(factor(train$offer)), FUN=sum)
t = aggregate(train, by=train$offer, FUN=sum)
t = aggregate(train, by=list(train$offer), FUN=sum)
train$offer
t = aggregate(train$repeater, by=list(train$offer), FUN=sum)
head(t)
t
t2 = aggregate(train$repeater, by=list(train$offer), FUN=count)
t2 = aggregate(train$repeater, by=list(train$offer), FUN=length)
head(t)
head(t2)
help(merge)
t = merge(t,t2, by="Group.1", all.x=T)
t
t$prob = t$x.x/t$x.y
t
names(t)[1] = "offer"
names(t)[4] = "prob"
head(t)
t = t[,c("offer","prob")]
t
t = t[order(prob),]
t = t[order(t$prob),]
t
t = t[order(-t$prob),]
t
t$row.names = NULL
t
row.names(t) = NULL
t
cat(t)
help(write.table)
write.table(t, row.names=F)
options(digits=2)
write.table(t, row.names=F)
View(offers)
View(offers)
head(train)
train = read.table(file="data/trainHistory", header=T, sep=",")
test = read.table(file="data/testHistory", header=T, sep=",")
offers = read.table(file="data/offers", header=T, sep=",")
transactions = read.table(file="data/sample1/sample.txt", header=T, sep=",")
nrow(transactions)
head(transactions)
help(option)
option()
options()
options(digit=5)
head(transactions)
options(digit=7)
head(transactions)
transactions$id
options(scipen=100)
head(transactions)
ids = unique(transactions$id)
ids
length(ids)
trainSample = tran[train$id %in% ids,]
trainSample = train[train$id %in% ids,]
nrow(trainSample)
t = merge(trainSample, offers[,c("offer","company","brand","category")], all.x=T)
head(t)
head(trainSample)
help(sample)
sample(1:10,2)
t[sample(1:nrow(t),10),]
trainSample = merge(trainSample, offers[,c("offer","company","brand","category")], all.x=T)
head(trainsample)
head(trainSample)
t = merge(trainSample, transactions, by=c("id","brand"), all.x=T)
head(t)
t = merge(trainSample, transactions[,c("id","brand","purchasequantity","purchaseamount")], by=c("id","brand"), all.x=T)
head(t)
tBrand = transactions[,c("id","brand","purchasequantity","purchaseamount")]
